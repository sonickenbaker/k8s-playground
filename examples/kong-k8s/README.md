# JWT creation

ssh-keygen -t rsa -b 4096 -m PEM -f jwtRS256.key
# Don't add passphrase
openssl rsa -in jwtRS256.key -pubout -outform PEM -out jwtRS256.key.pub

Example:
```bash
cat << EOF > /home/ubuntu/jwtRS256.key.pub
-----BEGIN PUBLIC KEY-----
MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAz4qDXyTQ8O22IIdqDof4
mH9EY8sipo2ySya7slZkOSwrCaiURn5RSru2bPeIOFNHpGvZW7EbiNNM63pRJYzd
mSs4ii9AD6wDy8CjQe7lXMkgEudAu1HZzEgqeCizyovVitN+TKm4A7QQckHPuclp
qt/UIPPy6lvL0VVlrFOQOxQXiFcJkcZZZrCUzfxYzXa1v2bcaPRGi8r06zGcxGCW
/F2r7UipIntV3ysAAiyrXQY37Y1piWMsoCFXH8pJBOA0lpikH4jXKoweI64iGAtf
quw8uHbifdOJDBh4y6nirH6xqM5wumb99cQ2p3tuMjkczQedMEefHXtJVEsZdpfU
s6CjquneOQqVhG9SnSRqOz4+NiWKMWcTPC+HmmJyKT+dTkxZ+bqDJ3cby+ZjzyjQ
a4QPMR6O9VTdfcVy10+8Xr2cdVXHLxQqaCIm7NqqGRYBfO2o9+C46/l8szQ2Hw+1
VZgWl2/JoSxbQI2BZkddbnIaX5y0RPz7u5LnkYQY0och36wqKDHiUjDqCDSxnUvt
uKbFKO+1naM4VJ7vzUnnnU3FmhDneAbhdfJvtYoLsdVrm7AFek+G4WlliLzz1NLI
MAJ7HEwR+61ZwhnoAmnZGGtpixKutzxors9ylJrKfhuly8s0thgbMQz/2A27us2p
pa+3ydT6uZTgz7NZWpgyymMCAwEAAQ==
-----END PUBLIC KEY-----
EOF

kubectl create -n stage secret \
  generic user-jwt \
  --from-literal=kongCredType=jwt \
  --from-literal=key="user-issuer" \
  --from-literal=algorithm=RS256 \
  --from-file=rsa_public_key="/home/ubuntu/jwtRS256.key.pub"

cat << EOF > /home/ubuntu/jwtRS256.key
-----BEGIN RSA PRIVATE KEY-----
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
-----END RSA PRIVATE KEY-----
EOF

# JWT
USER_JWT="eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJ1c2VyLWlzc3VlciIsIm5hbWUiOiJKb2huIERvZSIsImdhbWUiOiJIb3Jpem9uIFplcm8gRGF3biJ9.HFRwZdq-McPeWG_9ADMkrWN8kqUrYvbpZbtFzWGSPrZ5tLbN89rkN5P1_s2Z0I2VI4cn96zncI5pXV73RM4zZLbRXqeRm_avREs-mVhpfoK3S77u7s8AbcO_oVQFAvKIcq4nObdNwsUEF-zwYjUVXN8XEKzOQNl1oFiJ7lIxuKMc3cXNbsoEqECu1HkT13InjmHl7WsQXDWfqQUdSSD_RpIJf8kK5fESnvvpy-8NqyrwS7UjbXS8CEHb3HPmajM64ZSPCmTF7V-VkKonjAu-Gqcfktk2YSXW67RaWiU_YkAyncZYVyL2VGjlgOB8Y63SztbKNeFR6PIhqNbI5R8enicjJJAL1PVsxQRz72svYVBZm64pn7f38chZ0x1fY2XmN20ZueJs6WjE4fLut5rZpENbvbyK2-xhcMAtQ5Buf2Uy1hx0O23rMlZ9fgB353j6ImvUJvYlPsNxogtmBfE0U952x_lXd8JOnc93Ht_2bnveyVPdY80fMFkzkrlwIsSQfR7twcBXx0L1YP9maJHA1P7vv41T0Bb-b7QlMeoPUt5GtbitiHY6P8PLJxD3QBk_AHNcj3heCta_x1-dwaxCwoJ8jtvrD30uVb7qu-UEMB6bVX7d0_1E5Lg7zzXNsSO8o_nnBvQJqD3Wnk0Nk1El8y2UDVxzhqiQ-YkvlIiFI10"

curl -v -H "Authorization: Bearer ${USER_JWT}" http://echo-stage.com:$INGRESS_PORT/authenticated-foo --resolve "echo-stage.com:$INGRESS_PORT:$INGRESS_HOST"
```